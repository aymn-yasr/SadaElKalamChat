<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>شات صدى الكلام</title>

    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="css/chat_app_styles.css">
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <div class="top-buttons-left">
                <button class="icon-button" id="myProfileBtn" title="ملفي الشخصي">
                    <img src="default_images/user.png" alt="ملفي" class="profile-icon">
                    <span>ملفي</span>
                </button>
                <button class="icon-button" id="onlineUsersButton" title="المستخدمون المتصلون">
                    <i class="fas fa-users"></i>
                    <span>المتصلون</span>
                </button>
                <button class="icon-button" id="friendsButton" title="الأصدقاء">
                    <i class="fas fa-user-friends"></i>
                    <span>الأصدقاء</span>
                </button>
            </div>

            <div class="top-buttons-right">
                <button class="icon-button" id="privateChatButton" title="الخاص">
                    <i class="fas fa-comments"></i>
                    <span>الخاص</span>
                </button>
                <button class="icon-button" id="notificationsButton" title="الإشعارات">
                    <i class="fas fa-bell"></i>
                    <span>إشعارات</span>
                </button>
                <button class="icon-button" id="soundButton" title="الأصوات">
                    <i class="fas fa-volume-up"></i>
                    <span>صوت</span>
                </button>
                <button class="icon-button" id="menuButton" title="القائمة">
                    <i class="fas fa-bars"></i>
                    <span>قائمة</span>
                </button>
            </div>
        </div>

        <div id="sideMenu" class="side-menu">
            <div class="side-menu-header">
                <div class="current-room-info">
                    <span>الغرفة الحالية</span>
                    <div class="room-details">
                        <span class="room-name">الغرفة العامة</span>
                        <img src="default_images/room_icon.png" alt="غرفة" class="room-icon">
                    </div>
                </div>
            </div>
            <ul class="side-menu-list">
                <li><button class="side-menu-button" id="refreshPageButton"><i class="fas fa-sync-alt"></i> تحديث الصفحة</button></li>
                <li><button class="side-menu-button" id="roomsListButton"><i class="fas fa-home"></i> قائمة الرومات</button></li>
                <li><button class="side-menu-button" id="friendsWallButton"><i class="fas fa-globe"></i> حائط الأصدقاء</button></li>
                <li><button class="side-menu-button" id="newsButton"><i class="fas fa-newspaper"></i> الأخبار</button></li>
                <li><button class="side-menu-button" id="shopChatButton"><i class="fas fa-shopping-cart"></i> متجر الشات</button></li>
                <li><button class="side-menu-button" id="goldShopButton"><i class="fas fa-store"></i> متجر الذهب</button></li>
                <li><button class="side-menu-button" id="miscChatButton"><i class="fas fa-gift"></i> منوعات الشات</button></li>
                <li><button class="side-menu-button" id="convertPointsButton"><i class="fas fa-coins"></i> تحويل النقاط لذهب</button></li>
            </ul>
        </div>

        <div class="chat-messages" id="chatMessages">
            </div>

        <div class="chat-input">
            <input type="text" id="messageInput" placeholder="اكتب رسالتك هنا...">
            <button id="sendMessageButton" class="send-button">
                <i class="fas fa-paper-plane"></i> إرسال
            </button>
            <button class="icon-button-small" title="إرفاق ملف"><i class="fas fa-paperclip"></i></button>
            <button class="icon-button-small" title="إيموجي"><i class="fas fa-smile"></i></button>
        </div>
    </div>

    <div id="profileModal" class="modal">
        <div class="modal-content profile-menu-modal">
            <span class="close-button" id="closeProfileModal">&times;</span>
            <div class="profile-header-modal">
                <img id="modalProfileImage" src="default_images/user.png" alt="صورة المستخدم" class="modal-profile-image">
                <span id="modalProfileUsername" class="modal-profile-username">اسم المستخدم</span>
                <span id="modalProfileRank" class="modal-profile-rank">عضوية بريميوم رتبة 68</span>
            </div>
            <div class="modal-buttons">
                <button class="modal-button" id="adminPanelButtonModal" style="display:none;">
                    <i class="fas fa-user-shield"></i> لوحة الإدارة
                </button>
                <button class="modal-button" id="walletButton">
                    <i class="fas fa-wallet"></i> المحفظة
                </button>
                <button class="modal-button" id="levelInfoButton">
                    <i class="fas fa-chart-line"></i> معلومات المستوى
                </button>
                 <button class="profile-button" id="editProfileOptionsBtn">
                    تعديل الملف الشخصي
                    <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83l3.75 3.75 1.83-1.83z"/></svg>
                </button>
                <button class="modal-button leave-room-button" id="leaveRoomButton">
                    <i class="fas fa-door-open"></i> غادر الغرفة
                </button>
                <button class="modal-button logout-modal-button" id="logoutModalButton">
                    <i class="fas fa-sign-out-alt"></i> خروج
                </button>
            </div>
        </div>
    </div>

    <div id="registeredUsersModal" class="modal">
        <div class="modal-content registered-users-modal">
            <span class="close-button" id="closeRegisteredUsersModal">&times;</span>
            <h2>المستخدمون المتصلون</h2>
            <ul id="registeredUsersList" class="user-list">
                </ul>
        </div>
    </div>

    <div id="newsModal" class="modal">
        <div class="modal-content">
            <span class="close-button" id="closeNewsModal">&times;</span>
            <h2>أخبار صدى الكلام</h2>
            <div class="add-news-button-container">
                <button id="addNewsItemButton" style="display:none;">
                    <i class="fas fa-plus-circle"></i> إضافة خبر جديد
                </button>
            </div>
            <div id="newsList" class="news-list">
                </div>
        </div>
    </div>

    <div id="newsInputModal" class="modal">
        <div class="modal-content">
            <span class="close-button" id="closeNewsInputModal">&times;</span>
            <h2 id="newsInputModalTitle">إضافة خبر جديد</h2>
            <textarea id="newsContentInput" placeholder="اكتب محتوى الخبر هنا..."></textarea>
            <div class="news-input-actions">
                <button id="saveNewsItemButton"><i class="fas fa-save"></i> حفظ الخبر</button>
                <button id="cancelNewsEditButton"><i class="fas fa-times-circle"></i> إلغاء</button>
            </div>
        </div>
    </div>

    <div id="privateChatsModal" class="modal">
        <div class="modal-content private-chats-modal">
            <span class="close-button" id="closePrivateChatsModal">&times;</span>
            <h2>محادثاتي الخاصة</h2>
            <div class="private-chats-list-container">
                <ul id="privateChatsList" class="user-list">
                    <li class="no-private-chats">
                        <p>لا توجد محادثات خاصة حاليًا.</p>
                        <p>يمكنك بدء محادثة بالنقر على زر "بدء محادثة جديدة" أو بالنقر على اسم مستخدم في قائمة المتصلين.</p>
                    </li>
                </ul>
            </div>
            <div class="private-chat-footer">
                <button id="startNewPrivateChatButton" class="modal-button"><i class="fas fa-plus"></i> بدء محادثة جديدة</button>
            </div>
        </div>
    </div>

<div id="editProfileOptionsModal" class="modal edit-profile-modal">
    <div class="modal-content">
        <span class="close-button" onclick="document.getElementById('editProfileOptionsModal').style.display='none';" aria-label="إغلاق خيارات تعديل الملف الشخصي">&times;</span>
        <h2>تعديل الملف الشخصي</h2>

<div class="profile-display-area">
    <div class="profile-info-display-container-vertical">
        <img id="editProfileAvatarDisplay" src="default_images/user.png" alt="صورة البروفايل" class="edit-profile-avatar">

        <div class="avatar-action-buttons-vertical"> <button class="avatar-action-btn delete" id="deleteAvatarBtn" aria-label="حذف الصورة الشخصية">
                <svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41z"/></svg>
            </button>
            <button class="avatar-action-btn change" id="changeAvatarBtn" aria-label="تغيير الصورة الشخصية">
                <svg viewBox="0 0 24 24"><path fill="currentColor" d="M20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83l3.75 3.75 1.83-1.83zM3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25z"/></svg>
            </button>
        </div>

        <div class="profile-text-info-vertical">
            <span id="editProfileNameDisplay" class="profile-display-name"></span>
            <span id="editProfileStatusDisplay" class="profile-display-status"></span>
        </div>
    </div>
</div>
<input type="file" id="profileImageInput" accept="image/*" style="display: none;">

        <div class="edit-profile-options">
            <button class="edit-profile-option-button" id="editDataBtn">
                تعديل البيانات
                <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M14.06 9.06L15 8.12l.94.94L14.06 9.06zM12 7h2v2h-2zM6 19h12v-2H6v2zm12-4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm-4-4v4h-4v-4h4zM8 8v8h8V8H8zm2 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-16c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6z"/></svg>
            </button>
            <button class="edit-profile-option-button" id="changeUsernameBtn">
                تغيير اسم المستخدم
                <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83l3.75 3.75 1.83-1.83z"/></svg>
            </button>
            <button class="edit-profile-option-button" id="editStatusBtn">
                تعديل الحالة
                <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5C2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3C19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
            </button>
            <button class="edit-profile-option-button" id="changeNameColorBtn">
                لون اسم المستخدم
                <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M17 12c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM17 20.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5zM6 17c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM6 20.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5zM12 2C6.48 2 2 6.48 2 12v4.75c0 .41.34.75.75.75H13c.41 0 .75-.34.75-.75V12c0-2.76-2.24-5-5-5S3 9.24 3 12c0 2.22 1.45 4.12 3.51 4.88c.18-.55.33-.87.49-.96.79-.42 1.63-.44 2.25-.19.34.14.7.35 1.05.61.16-.09.31-.22.46-.36.42-.42 1.04-.65 1.7-.65 1.38 0 2.5 1.12 2.5 2.5 0 .66-.23 1.28-.65 1.7-.14.15-.27.3-.36.46.26.35.47.71.61 1.05.25.62.23 1.46-.19 2.25-.09.16-.41.31-.96.49 0 0 .75.75.75.75H22c.55 0 1 .45 1 1s-.45 1-1 1h-2v1c0 1.1.9 2 2 2h2c1.1 0 2-.9 2-2v-1h2c.55 0 1-.45 1-1s-.45-1-1-1h-2V13c0-1.1-.9-2-2-2h-2c-1.1 0-2 .9-2 2v2c0-1.1-.9-2-2-2h-2v-2c0-1.1-.9-2-2-2h-2c-1.1 0-2 .9-2 2zm2 5h-4c0-.55.45-1 1-1h2c.55 0 1 .45 1 1z"/></svg>
            </button>
            <button class="edit-profile-option-button" id="changeFontColorBtn">
                لون الخط
                <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-2-12h4c1.1 0 2 .9 2 2v6c0 1.1-.9 2-2 2h-4c-1.1 0-2-.9-2-2v-6c0-1.1.9-2 2-2zm0 2v6h4v-6h-4z"/></svg>
            </button>
            <button class="edit-profile-option-button" id="editSoundsBtn">
                الأصوات
                <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M14 3.23V5.29C16.89 6.15 19 8.83 19 12c0 3.17-2.11 5.85-5 6.71v2.06c4.07-.94 7-4.44 7-8.77c0-4.33-2.93-7.83-7-8.77zM16.5 12c0-1.77-1.02-3.29-2.5-4.03V16.03c1.48-.74 2.5-2.26 2.5-4.03zM3 9v6h4l5 5V4L7 9H3z"/></svg>
            </button>
        </div>
    </div>
</div>

<div id="soundsModal" class="modal">
    <div class="modal-content">
        <span class="close-button" onclick="document.getElementById('soundsModal').style.display='none';" aria-label="إغلاق إعدادات الأصوات">&times;</span>
        <h2>إعدادات الأصوات</h2>
        <div class="sound-option">
            <label for="masterVolume">التحكم بالصوت العام:</label>
            <input type="range" id="masterVolume" min="0" max="1" step="0.01" value="1">
        </div>
        <div class="sound-option">
            <label for="incomingMessageVolume">صوت الرسائل الواردة:</label>
            <input type="range" id="incomingMessageVolume" min="0" max="1" step="0.01" value="1">
        </div>
        <div class="sound-option">
            <label for="outgoingMessageVolume">صوت الرسائل الصادرة:</label>
            <input type="range" id="outgoingMessageVolume" min="0" max="1" step="0.01" value="1">
        </div>
        <div class="sound-option">
            <label for="notificationSound">صوت الإشعارات:</label>
            <input type="range" id="notificationSound" min="0" max="1" step="0.01" value="1">
        </div>
        <div class="sound-option">
            <label for="muteAllSounds">كتم كل الأصوات:</label>
            <label class="switch">
                <input type="checkbox" id="muteAllSounds">
                <span class="slider"></span>
            </label>
        </div>
    </div>
</div>

<div id="editStatusModal" class="modal">
    <div class="modal-content">
        <span class="close-button" id="closeStatusModalBtn">&times;</span>
        <h2>تعديل الحالة</h2>
        <input type="text" id="newStatusInput" placeholder="اكتب حالتك الجديدة هنا..." maxlength="100">
        <button id="saveNewStatusBtn" class="save-button">حفظ الحالة</button>
    </div>
</div>

    <script type="module" src="js/firebaseInit.js"></script>
    <script type="module" src="js/chat_script.js"></script>
</body>
</html>